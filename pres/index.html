<!DOCTYPE html>
<html>

<head>
    <title>IPS / PSA</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="core/fonts/mono.css">
    <link rel="stylesheet" type="text/css" href="core/css/animate.css">
    <link rel="stylesheet" type="text/css" href="core/css/cinescript.css">
    <link rel="stylesheet" type="text/css" href="core/css/style_core.css">
    <link rel="stylesheet" type="text/css" href="core/css/mermaid.css">
    <link rel="stylesheet" type="text/css" href="core/css/gitgraph.css">
    <link rel="stylesheet" type="text/css" href="core/css/style_ensiie.css">
    <link rel="stylesheet" type="text/css" href="core/css/katex.css">
</head>

<body>
    <textarea id="source" readonly>

class: middle

# Projet PRSA
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

I. [Introduction au projet](index.html#) 

    1. Présentation du problème
    2. Objectifs

II. [Field generator](index.html#)

    1. Fichier d'entré JSON
    2. Différents potentiels implémentés
    3. Structure de la base de donnée
    4. Utilisation de la base de donnée

III. [Solveur Implémentation](index.html#)
    
    1. Résolution mathématique
    2. Matrices complexes
    3. Implémentation des méthodes de résolution
    4. Bindings python

IV. [Post Processor](index.html#8)

    1. 

---
class: middle
# I - Introduction au projet - Présentation du problème
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

---
class: middle
# I - Introduction au projet - Objectifs
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]


---
class: middle
# II - Field generator - Fichier d'entré JSON
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

---
class: middle
# II - Field generator - Différents potentiels implémentés
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

---
class: middle
# II - Field generator - Structure de la base de donnée
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

.noflex[
Use **`![](image.png)`**

.block.rightf.w20.animated.fadeInRight.wait1s[ ![](images/database.png).hcenter[Wikipedia logo] ]

---
class: middle
# II - Field generator - interaction avec la base de donnée
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

```python3
def PutMatrixInDB(experienceName, experienceHash, time, psiRe, psiIm, potential):
    try:
        db = client.results
        matrix = db.matrix

        psiReDB = bson.binary.Binary(pickle.dumps(psiRe, protocol = 2))
        psiImDB = bson.binary.Binary(pickle.dumps(psiIm, protocol = 2))
        potentialDB = bson.binary.Binary(pickle.dumps(potential, protocol = 2))

        data = { "Experience": experienceName, "Hash": experienceHash, "Time": time, "Psi_Real": psiReDB, "Psi_Imaginary": psiImDB, "Potential": potentialDB }
        matrix.insert_one(data).inserted_id

    except pymongo.errors.OperationFailure as e:
        print("ERROR: %s" % (e))
```

---
class: middle
# III - Solveur - Résolution mathématique
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

---
class: middle
# III - Solveur - Matrices complexes
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

#### Dans complex_mat.h
```cpp
typedef struct complex_mat
{
  mat re;
  mat im;
}complex_mat;
```

#### Dans complex_mat.cpp
```cpp
complex_mat init_c_mat(uword n, uword m)
{
  complex_mat M;
  M.re.zeros(n, m);
  M.im.zeros(n, m);
  return M;
}

ComplexMat::ComplexMat(mat re_val, mat im_val)
{
  complex_mat M;
  M.re = re_val;
  M.im = im_val;
}
```

---
class: middle
# III - Solveur - Implémentation des méthodes de résolution
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

#### Dans solver.cpp
```cpp
complex_mat Solver::FTCS_derivation(complex_mat psi_t)
{
  complex_mat psi_t_dt = init_c_mat(nx, ny);

  double dt = dt_vals[0];
  int dx = (x_max - x_min) / nx;
  int dy = (y_max - y_min) / ny;  

  for(uword i = 1; i < nx-1; ++i)
  {
    for(uword j = 1; j < ny-1; ++j)
    {
      double A = ((-1/h_bar)*V(i,j) - ((h_bar/m) * (1/dx*dx + 1/dy*dy)));
      double B = (h_bar/2*m);
      double psi_x_im = psi_t.im(i+1,j) + psi_t.im(i-1,j);
      double psi_y_im = psi_t.im(i,j+1) + psi_t.im(i,j-1);
      double psi_x_re = psi_t.re(i+1,j) + psi_t.re(i-1,j);
      double psi_y_re = psi_t.re(i,j+1) + psi_t.re(i,j-1);

      psi_t_dt.re(i,j) = psi_t.re(i,j) - dt * (A * psi_t.im(i,j) + B * ((1/dx*dx) * psi_x_im + (1/dy*dy) * psi_y_im));
      psi_t_dt.im(i,j) = psi_t.im(i,j) + dt * (A * psi_t.re(i,j) + B * ((1/dx*dx) * psi_x_re + (1/dy*dy) * psi_y_re));
    }
  }
  return psi_t_dt;
}
```
---
class: middle
# III - Solveur - Bindings python
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

#### Dans solver.i
```cpp
%module solver
%{
#include "../include/solver.h"
#include "../include/complexmat.h"
%}
%include "../include/solver.h"
%include "../include/complexmat.h"

```
#### Dans setup.py
```cpp
from setuptools import setup, Extension

module1 = Extension('_solver', sources=['solver.i','../src/solver.cpp', '../src/complexmat.cpp'], swig_opts=["-c++"])

setup(name='package_solver',
      py_modules=['solver'],
      version='1.0',
      description="This package implements the solver's functions",
      ext_modules=[module1])

```

---
class: middle
# IV - Post processor -
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

---
class: middle
# IV - Post processor -
.footnote[E.Onal, S. Darnault, A. Marquis - ENSIIE - 2025]

    </textarea>

    <script src="core/javascript/remark.js"></script>
    <script src="core/javascript/katex.min.js"></script>
    <script src="core/javascript/auto-render.min.js"></script>
    <script src="core/javascript/emojify.js"></script>
    <script src="core/javascript/mermaid.js"></script>
    <script src="core/javascript/term.js"></script>
    <script src="core/javascript/jquery-2.1.1.min.js"></script>
    <script src="core/javascript/extend-jquery.js"></script>
    <script src="core/javascript/cinescript.js"></script>
    <script src="core/javascript/gitgraph.js"></script>
    <script>

        // === Remark.js initialization ===
        var slideshow = remark.create({
            highlightStyle: 'monokai',
            countIncrementalSlides: false,
            highlightLines: false
        });

        // === Mermaid.js initialization ===
        mermaid.initialize({
            startOnLoad: false,
            cloneCssStyles: false,
            flowchart: {
                height: 50
            },
            sequenceDiagram: {
                width: 110,
                height: 30
            }
        });

        function initMermaid(s) {
            var diagrams = document.querySelectorAll('.mermaid');
            var i;
            for (i = 0; i < diagrams.length; i++) {
                if (diagrams[i].offsetWidth > 0) {
                    mermaid.init(undefined, diagrams[i]);
                }
            }
        }

        slideshow.on('afterShowSlide', initMermaid);
        initMermaid(slideshow.getSlides()[slideshow.getCurrentSlideIndex()]);


        // === Emojify.js initialization ===
        emojify.run();

        // === Cinescript initialization ===
        $(document).ready(init_cinescripts);

        renderMathInElement(document.body, {
            delimiters: [{ left: "$$", right: "$$", display: true }, {
                left: "\\(",
                right: "\\)",
                display: false
            }], ignoredTags: []
        });

    </script>
</body>

</html>